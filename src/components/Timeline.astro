import ContentSection from "~/components/content-section.astro";
import type { TimelineItem } from "~/types";

const timelineItems: Array<TimelineItem> = [
  {
    title: "B.E. in Computer Science",
    date: "2022 - 2026",
    description: "Pursuing a Bachelor's degree at JCT College of Engineering and Technology, Anna University. Focused on software development and machine learning.",
  },
  {
    title: "Kerala Sasthrolsavam IT Fair",
    date: "2020",
    description: "Secured first place in animation at the Palakkad District, recognized by the Government of Kerala.",
  }
];
---

<ContentSection title="Education" id="timeline">
  <div class="timeline-shell">
    <span class="timeline-glow" aria-hidden="true"></span>
    <span class="timeline-shimmer" aria-hidden="true"></span>
    <ol class="timeline-list">
      {timelineItems.map((item) => (
        <li class="timeline-item">
          <span class="timeline-node" aria-hidden="true"></span>
          <article class="timeline-card">
            <div class="timeline-meta">
              <span class="timeline-date">{item.date}</span>
            </div>
            <h3 class="timeline-title gradient-text2">{item.title}</h3>
            <p class="timeline-body text-default">{item.description}</p>
          </article>
        </li>
      ))}
    </ol>
  </div>
</ContentSection>

<style>
  .timeline-shell {
    position: relative;
    max-width: 56rem;
    margin: 0 auto;
    padding-left: 3rem;
  }

  .timeline-shell::before {
    content: "";
    position: absolute;
    left: 1.25rem;
    top: 0.5rem;
    bottom: 0.5rem;
    width: 2px;
    background: linear-gradient(
      180deg,
      transparent 0%,
      var(--color-primary) 18%,
      #6366f1 50%,
      var(--color-primary) 82%,
      transparent 100%
    );
    opacity: 0.9;
  }

  .timeline-glow {
    content: "";
    position: absolute;
    left: 1.25rem;
    top: 0.5rem;
    bottom: 0.5rem;
    width: 12px;
    transform: translateX(-5px);
    background: radial-gradient(
      circle,
      rgba(34, 211, 238, 0.45) 0%,
      rgba(34, 211, 238, 0.1) 45%,
      transparent 70%
    );
    filter: blur(6px);
    opacity: 0.6;
    pointer-events: none;
  }

  .timeline-shimmer {
    position: absolute;
    left: 1.25rem;
    top: 0.5rem;
    width: 6px;
    height: 72px;
    transform: translateX(-50%);
    background: linear-gradient(
      180deg,
      transparent 0%,
      rgba(255, 255, 255, 0.75) 50%,
      transparent 100%
    );
    filter: blur(0.5px);
    mix-blend-mode: screen;
    opacity: 0;
    animation: railShimmer 3.4s ease-in-out infinite;
    pointer-events: none;
  }

  .timeline-list {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
  }

  .timeline-item {
    position: relative;
  }

  .timeline-node {
    position: absolute;
    left: 1.25rem;
    top: 0.75rem;
    width: 14px;
    height: 14px;
    transform: translateX(-50%);
    border-radius: 9999px;
    background: var(--color-background);
    border: 2px solid var(--color-primary);
    box-shadow: 0 0 0 6px rgba(34, 211, 238, 0.12),
      0 0 18px rgba(34, 211, 238, 0.5),
      0 0 30px rgba(99, 102, 241, 0.35);
  }

  .timeline-card {
    position: relative;
    border-radius: 18px;
    border: 1px solid var(--color-border);
    background: var(--color-background-offset);
    padding: 1.5rem 1.75rem 1.6rem;
    box-shadow: 0 18px 50px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    transition: transform 240ms ease, box-shadow 240ms ease;
  }

  .timeline-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 26px 60px rgba(0, 0, 0, 0.28);
  }

  .timeline-meta {
    margin-bottom: 0.7rem;
  }

  .timeline-date {
    display: inline-flex;
    align-items: center;
    border-radius: 9999px;
    border: 1px solid var(--color-border);
    padding: 0.35rem 0.85rem;
    font-size: 0.7rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--color-text-offset);
    background: var(--color-background);
  }

  .timeline-title {
    font-size: 1.35rem;
    font-weight: 700;
    margin-bottom: 0.35rem;
  }

  .timeline-body {
    font-size: 1rem;
  }

  @keyframes railShimmer {
    0% {
      top: 0.5rem;
      opacity: 0;
    }
    12% {
      opacity: 0.85;
    }
    70% {
      opacity: 0.7;
    }
    100% {
      top: calc(100% - 72px);
      opacity: 0;
    }
  }

  @media (max-width: 640px) {
    .timeline-shell {
      padding-left: 2.25rem;
    }

    .timeline-node {
      top: 0.6rem;
    }

    .timeline-card {
      padding: 1.25rem 1.25rem 1.4rem;
    }
  }
</style>